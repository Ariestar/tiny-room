# 实现计划

## 任务概述

将 Gallery 和 Blog 页面的视觉增强特效分解为具体的编码任务。重点实现视差滚动、磁吸悬停、呼吸动画等效果，同时保持现有瀑布流布局和 BentoGrid 结构。

## 任务列表

- [x] 1. 创建核心动画组件

  - 实现 BreathingAnimation、MagneticHover、ParallaxItem 三个核心组件
  - 添加 TypeScript 类型定义和组件导出
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 1.1 实现 BreathingAnimation 组件

  - 创建 `src/components/animation/BreathingAnimation.tsx` 文件
  - 实现基于 CSS 变量的呼吸动画效果，支持不同内容类型的动画参数
  - 添加悬停暂停功能和 prefers-reduced-motion 支持
  - _需求: 1.4_

- [x] 1.2 实现 MagneticHover 组件

  - 创建 `src/components/animation/MagneticHover.tsx` 文件
  - 实现基于 Framer Motion 的磁吸悬停效果，包含 3D 变换和光晕效果
  - 添加触摸设备的手势支持和响应式强度调整
  - _需求: 1.3_

- [x] 1.3 实现 ParallaxItem 组件

  - 创建 `src/components/animation/ParallaxItem.tsx` 文件
  - 基于现有 useScroll hook 实现视差滚动效果
  - 支持多层视差和性能优化的视口检测
  - _需求: 1.2_

- [x] 1.4 创建组件类型定义文件

  - 创建 `src/components/animation/types.ts` 文件
  - 定义所有新组件的 TypeScript 接口
  - 导出组件 props 类型供外部使用
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 1.5 更新动画组件导出文件

  - 修改 `src/components/animation/index.ts` 文件
  - 添加新组件的导出和类型导出
  - 确保与现有动画组件的兼容性
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 2. 添加视觉特效样式系统

  - 创建专用的 CSS 文件处理动画样式
  - 扩展主题变量支持光晕效果和动画参数
  - _需求: 1.1, 1.2, 1.3, 1.4, 5.1, 5.2, 5.3_

- [x] 2.1 创建视觉特效样式文件

  - 创建 `src/styles/visual-effects.css` 文件
  - 实现呼吸动画、磁吸光晕、视差项目的 CSS 样式
  - 添加响应式和无障碍访问的媒体查询
  - _需求: 1.4, 1.3, 1.2_

- [x] 2.2 扩展全局样式变量

  - 修改 `src/styles/globals.css` 文件
  - 添加光晕效果所需的 RGB 颜色变量
  - 定义不同内容类型的动画参数变量
  - _需求: 5.1, 5.2, 5.3_

- [x] 2.3 在应用中引入新样式文件

  - 修改 `src/app/layout.tsx` 文件
  - 导入 visual-effects.css 样式文件
  - 确保样式加载顺序和优先级正确
  - _需求: 5.1, 5.2, 5.3_

- [x] 3. 增强 Gallery 页面视觉效果

  - 在现有 Masonry 瀑布流基础上添加三种视觉特效
  - 保持现有布局和交互逻辑不变
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7_

- [x] 3.1 为 Gallery 图片添加视觉特效包装

  - 修改 `src/app/(public)/gallery/page.tsx` 文件
  - 在现有图片项外包装 ParallaxItem、MagneticHover、BreathingAnimation 组件
  - 根据图片索引设置不同的视差层级和动画延迟
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 3.2 优化 Gallery 页面的动画参数

  - 调整图片的磁吸强度为 0.15，缩放比例为 1.03
  - 设置风景图片的呼吸动画周期为 8 秒
  - 为每个图片设置 index \* 0.3 秒的动画延迟
  - _需求: 1.3, 1.4_

- [ ] 4. 创建图片详情滚动交互功能

  - 增强现有 FullscreenCarousel 组件，添加滚动查看详情功能
  - 实现滚动指示器和图片详情面板
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 2.10, 2.11_

- [ ] 4.1 创建 ScrollIndicator 组件

  - 创建 `src/components/animation/ScrollIndicator.tsx` 文件
  - 实现带动画的滚动提示组件，包含向下箭头和提示文字
  - 添加显示/隐藏的动画过渡效果
  - _需求: 2.2_

- [ ] 4.2 创建 ImageDetails 组件

  - 创建 `src/components/feature/gallery/ImageDetails.tsx` 文件
  - 实现图片详情面板，包含基本信息、评分、评论、相关推荐功能
  - 使用现有的 Card、Input、Button 等 UI 组件
  - _需求: 2.5, 2.6, 2.7, 2.8_

- [ ] 4.3 增强 FullscreenCarousel 组件

  - 修改 `src/components/feature/gallery/FullscreenCarousel.tsx` 文件
  - 添加滚动监听和进度计算逻辑
  - 实现图片区域的视差效果和详情面板的渐入动画
  - 集成 ScrollIndicator 和 ImageDetails 组件
  - _需求: 2.1, 2.3, 2.4, 2.9, 2.10, 2.11_

- [ ] 5. 增强 Blog 页面视觉效果

  - 为现有 BentoGrid 卡片添加磁吸和呼吸动画效果
  - 保持现有的网格布局和动画系统
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6_

- [ ] 5.1 为 Blog 文章卡片添加视觉特效

  - 修改 `src/app/(public)/blog/BlogPageClient.tsx` 文件
  - 在现有 BentoCard 外包装 MagneticHover 和 BreathingAnimation 组件
  - 为文章卡片设置较小的磁吸强度 0.1 和 7 秒的呼吸周期
  - _需求: 3.2, 3.3_

- [ ] 5.2 优化 Blog 页面的动画参数

  - 调整精选文章和普通文章的不同动画参数
  - 设置文章卡片的动画延迟为 index \* 0.4 秒
  - 确保与现有 BentoGrid 动画的协调性
  - _需求: 3.2, 3.3_

- [ ] 6. 实现跨页面视觉一致性

  - 确保 Gallery 和 Blog 页面使用相同的基础组件和参数
  - 统一动画效果和交互体验
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7_

- [ ] 6.1 创建组件使用指南和示例

  - 在组件文件中添加详细的 JSDoc 注释
  - 创建组件使用的最佳实践文档
  - 确保组件嵌套顺序的一致性
  - _需求: 5.1, 5.2, 5.3, 5.7_

- [ ] 6.2 验证移动端交互体验

  - 测试触摸设备上的磁吸效果和动画性能
  - 验证响应式动画参数的效果
  - 确保 prefers-reduced-motion 设置的正确响应
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [ ] 7. 优化其他页面的视觉一致性

  - 适度优化其他页面的视觉效果，保持整站一致性
  - 不做大幅改动，重点提升视觉协调性
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 7.1 统一页面头部和导航的视觉风格

  - 检查并优化各页面头部组件的一致性
  - 确保导航交互的视觉反馈统一
  - 应用相同的悬停效果和过渡动画
  - _需求: 8.1, 8.2_

- [ ] 7.2 优化 UI 组件的一致性

  - 检查按钮、卡片等 UI 组件在不同页面的表现
  - 统一交互状态和视觉反馈
  - 确保主题切换的正确应用
  - _需求: 8.2, 8.3_

- [ ] 8. 最终测试和优化

  - 进行全面的功能测试和性能验证
  - 确保所有动画效果的流畅性和一致性
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_

- [ ] 8.1 功能完整性测试

  - 测试所有视觉特效在不同浏览器和设备上的表现
  - 验证动画的流畅性和交互的响应性
  - 检查无障碍访问功能的正确实现
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6_

- [ ] 8.2 性能和加载优化验证

  - 验证页面加载时间和动画性能
  - 检查懒加载和缓存机制的有效性
  - 确保移动设备上的流畅体验
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_

- [ ] 8.3 最终代码整理和文档更新
  - 清理临时代码和调试信息
  - 更新组件文档和使用说明
  - 确保代码质量和可维护性
  - _需求: 5.7, 8.4, 8.5_

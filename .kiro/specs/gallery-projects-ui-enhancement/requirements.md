# 需求文档

## 介绍

本规范专注于提升 Tiny Room 应用的整体视觉设计和用户体验，重点美化 Gallery（画廊）和 Blog（博客）页面，同时对其他页面进行适度的视觉优化。目标是创建现代化、视觉吸引力强的界面，有效展示内容，同时保持与整体设计系统的一致性。此次增强将以 Gallery 和 Blog 为核心，辐射到整个网站的视觉体验提升。

## 需求

### 需求 1

**用户故事：** 作为访客，我希望能够通过创新且沉浸式的界面浏览 Gallery 页面，以便我能够获得视觉震撼和引人入胜的浏览体验。

#### 设计讨论

- **当前状态分析**：现有 Gallery 页面使用基础 Masonry 瀑布流布局，交互效果较为简单
- **核心改进原则**：保持现有瀑布流布局结构，仅添加视觉增强效果，不破坏布局稳定性
- **核心改进功能**：
  - **保持瀑布流布局**：维持现有 Masonry 布局的核心结构和响应式特性
  - **视差滚动效果**：实现轻微的 3D 视差效果，不同图片在滚动时产生不同的深度层次
    - 前景层图片：translateZ(0px) - 正常滚动速度
    - 中景层图片：translateZ(-20px) - 稍慢滚动速度
    - 背景层图片：translateZ(-40px) - 最慢滚动速度
    - 滚动时根据视口位置动态调整 translateY 偏移
  - **磁吸悬停效果**：鼠标接近图片时产生轻微的"吸引"效果
    - 磁吸强度：0.15（温和的吸引力度）
    - 3D 变换：轻微的 translate3d + scale(1.03) + rotateX/Y
    - 光晕效果：悬停时显示径向渐变光晕，跟随鼠标位置移动
    - 不影响布局：使用 transform 而非改变元素尺寸
  - **呼吸动画效果**：图片轻微的缩放动画，模拟自然呼吸效果
    - 动画周期：6-8 秒的缓慢呼吸节奏
    - 缩放范围：scale(1) 到 scale(1.008) 的微妙变化
    - 亮度调节：brightness(1) 到 brightness(1.02) 的轻微变化
    - 饱和度调节：saturate(1) 到 saturate(1.05) 的色彩增强
    - 错开动画：每个图片有不同的 animation-delay
    - 悬停暂停：鼠标悬停时暂停呼吸动画
  - **色彩传递**：悬停时图片主色调扩散到周围区域形成光晕
  - **投票评分**：用户可以对图片进行评分，显示平均评分
- **技术约束**：所有动画效果必须使用 CSS transform 和 opacity，避免触发布局重排

#### 验收标准

1. 当我访问 Gallery 页面时，系统应该保持现有的瀑布流布局，不改变图片的排列逻辑和响应式行为
2. 当我滚动页面时，系统应该实现轻微的视差滚动效果，不同图片以不同速度移动，创造深度感但不影响布局稳定性
3. 当我的鼠标接近照片时，系统应该实现磁吸效果，图片轻微向鼠标方向移动并放大至 103%，同时显示跟随鼠标的光晕效果
4. 当页面静止时，系统应该为所有图片添加 6-8 秒周期的微妙呼吸动画，包括轻微缩放和亮度/饱和度变化
5. 当我悬停在照片上时，系统应该暂停呼吸动画，显示磁吸效果和径向渐变光晕
6. 当我查看照片时，系统应该提供投票评分功能，显示当前平均评分和允许我进行评分
7. 当动画播放时，系统应该确保所有效果不会导致页面重排或影响滚动性能

### 需求 2

**用户故事：** 作为访客，我希望能够在详细视图中查看单张照片，以便我能够看到完整图片以及元数据和导航选项。

#### 设计讨论

- **当前状态分析**：现有全屏查看功能较为简单，只有基本的图片显示和关闭按钮
- **核心改进：向下滚动查看详情**：采用分层滚动设计，上半部分显示图片，下半部分显示详细信息
- **改进方向**：
  - **分层滚动布局**：图片占据视口上半部分，向下滚动显示详情面板
  - **滚动视差效果**：图片区域在滚动时产生轻微的视差移动效果
  - **滚动指示器**：底部显示"向下滚动查看详情"的动画提示
  - **详情面板渐入**：滚动到一定位置时，详情面板以渐入动画出现
  - **图片元数据展示**：详细的 EXIF 信息、拍摄参数、地理位置等
  - **评论和评分系统**：用户可以评论和评分图片
  - **相关图片推荐**：显示相似或相关的其他图片
  - **导航功能**：上一张/下一张导航，支持键盘和触摸手势

#### 验收标准

1. 当我打开照片详情页面时，系统应该显示高质量的全尺寸图片占据视口上半部分，支持缩放和平移操作
2. 当我向下滚动时，系统应该显示"向下滚动查看详情"的动画指示器，引导我继续滚动
3. 当我滚动页面时，系统应该对图片区域应用轻微的视差效果，图片以较慢速度移动创造深度感
4. 当我滚动到一定位置时，系统应该以渐入动画显示详情面板，包含图片元数据、描述、评分等信息
5. 当查看详情面板时，系统应该显示完整的图片信息：文件名、上传日期、尺寸、EXIF 数据、地理位置、标签等
6. 当在详情面板中时，系统应该提供评论功能，显示现有评论并允许我添加新评论
7. 当查看详情时，系统应该显示用户评分（星级评分）和平均分，允许我进行评分
8. 当在详情面板底部时，系统应该推荐相关图片的缩略图，点击可直接跳转
9. 当在照片详情视图中时，系统应该提供清晰的上一张/下一张导航按钮和键盘快捷键支持
10. 当我想要关闭详情视图时，系统应该提供多种退出方式（ESC 键、点击背景、关闭按钮）
11. 当在移动设备上查看时，系统应该支持触摸手势（滑动切换、双击缩放、捏合缩放）并适配滚动交互

### 需求 3

**用户故事：** 作为访客，我希望能够通过现代化且沉浸式的布局浏览 Blog 页面，以便我能够轻松发现和阅读感兴趣的文章。

#### 设计讨论

- **当前状态分析**：现有 Blog 页面需要全新设计，目前可能只有基础的文章列表
- **Blog 页面架构**：
  - **第一页（精选内容页）**：展示精选文章，采用大卡片布局突出重要内容
  - **第二页（时间线列表页）**：按时间顺序显示所有文章，采用时间轴设计
  - **2D 图谱导航**：右下角图谱图标，展开后显示标签关系图（后续任务完善）
- **时间线设计特色**：
  - **时间轴布局**：按年份和月份分组，使用视觉化时间线
  - **文章卡片**：包含日期、标题、摘要、阅读时长、互动数据、标签
  - **简洁导航**：右下角仅显示图谱图标，点击展开全屏 2D 标签关系图
  - **响应式设计**：移动端适配单列时间线布局

#### 验收标准

1. 当我访问 Blog 首页时，系统应该显示精选文章的大卡片布局，突出重要内容
2. 当我点击"所有文章"时，系统应该显示按时间线组织的完整文章列表，按年月分组
3. 当我查看时间线时，系统应该显示每篇文章的发布日期、标题、摘要、阅读时长、评论数、点赞数和相关标签
4. 当我在文章列表页面时，系统应该在右下角显示一个简洁的图谱图标
5. 当我点击图谱图标时，系统应该展开全屏的 2D 标签关系图谱界面，显示"收起"按钮
6. 当我在移动设备上查看时，系统应该将时间线调整为单列布局，保持良好的可读性

### 需求 4

**用户故事：** 作为访客，我希望能够在优雅的阅读界面中查看单篇博客文章，以便我能够专注地阅读内容并获得良好的阅读体验。

#### 设计讨论

- **当前状态分析**：需要创建专门的文章详情页面路由 `/blog/[slug]`
- **现代文章阅读体验设计**：
  - **沉浸式阅读模式**：去除干扰元素，专注内容本身
  - **优雅的排版系统**：合适的行高、字间距、段落间距
  - **渐进式内容展示**：标题、摘要、正文的层次化展示
  - **智能阅读辅助**：阅读进度条、预计阅读时间、目录导航
  - **社交互动功能**：分享按钮、点赞、评论区域
  - **相关内容推荐**：文章底部的相关文章推荐

#### 验收标准

1. 当我打开文章详情页面时，系统应该显示精美的文章头部，包含标题、发布日期、标签和阅读时间
2. 当我阅读文章时，系统应该提供优雅的排版，包括合适的字体、行高和段落间距
3. 当我滚动阅读时，系统应该显示阅读进度指示器和平滑的滚动体验
4. 当文章较长时，系统应该提供目录导航和返回顶部功能
5. 当我想要分享文章时，系统应该提供便捷的社交分享按钮
6. 当我读完文章时，系统应该推荐相关文章，鼓励继续阅读

### 需求 5

**用户故事：** 作为访客，我希望 Gallery 和 Blog 页面之间有一致的视觉设计和交互效果，以便网站感觉连贯且专业。

#### 设计讨论

- **通用视觉效果组件**：将呼吸动画和磁吸效果设计为可复用的 React 组件
- **组件化设计**：
  - **BreathingAnimation 组件**：可应用于任何内容卡片的呼吸动画效果
    - 支持自定义动画周期（默认 6-8 秒）
    - 支持自定义缩放范围和亮度/饱和度调节
    - 支持不同内容类型的动画节奏（风景照 8 秒，人像照 5 秒，文章卡片 7 秒）
    - 提供 hover 时暂停动画的功能
  - **MagneticHover 组件**：可应用于任何交互元素的磁吸悬停效果
    - 支持自定义磁吸强度（Gallery 图片 0.15，Blog 卡片 0.1）
    - 支持自定义缩放比例和 3D 变换参数
    - 支持自定义光晕效果的颜色和强度
    - 提供不同尺寸元素的适配参数
- **跨页面一致性**：Gallery 图片和 Blog 文章卡片使用相同的基础组件，但参数可调

#### 验收标准

1. 当我在 Gallery 和 Blog 页面之间导航时，系统应该保持一致的导航和布局模式
2. 当我查看 Gallery 图片和 Blog 文章卡片时，系统应该使用相同的呼吸动画组件，但针对不同内容类型调整动画参数
3. 当我悬停在 Gallery 图片和 Blog 卡片上时，系统应该使用相同的磁吸效果组件，但根据元素大小调整磁吸强度
4. 当我与不同页面的元素交互时，系统应该提供一致的悬停状态、光晕效果和动画过渡
5. 当页面加载时，系统应该使用一致的加载状态和过渡效果
6. 如果网站有深色/浅色主题，系统应该在所有使用这些组件的页面中应用一致的主题
7. 当开发者需要在新页面使用这些效果时，系统应该提供易于集成的组件 API

### 需求 6

**用户故事：** 作为访客，我希望有流畅的动画和微交互，以便浏览体验感觉精致且引人入胜。

#### 验收标准

1. 当元素进入视野时，系统应该用微妙的入场效果为它们添加动画
2. 当我悬停在交互元素上时，系统应该提供即时的视觉反馈
3. 当我在页面之间导航时，系统应该使用平滑的页面过渡
4. 当内容加载时，系统应该使用渐进式加载动画
5. 当我与筛选器或导航交互时，系统应该平滑地为状态变化添加动画
6. 当动画播放时，系统应该尊重用户对减少动画的偏好设置

### 需求 7

**用户故事：** 作为使用移动设备的访客，我希望有优化的触摸交互和布局，以便我能够在较小的屏幕上舒适地浏览内容。

#### 验收标准

1. 当我使用触摸手势时，系统应该适当地响应滑动和点击
2. 当我在移动设备上查看内容时，系统应该提供足够的触摸目标（最小 44px）
3. 当我滚动浏览内容时，系统应该提供流畅的滚动性能
4. 当我缩放或平移图片时，系统应该支持原生触摸手势
5. 如果内容溢出，系统应该提供清晰的滚动指示器
6. 当我旋转设备时，系统应该适当地调整布局

### 需求 8

**用户故事：** 作为访客，我希望其他页面也有适度的视觉优化，以便整个网站保持一致的高质量体验。

#### 设计讨论

- **涉及页面**：首页、Projects 页面、Dashboard 等其他页面
- **优化原则**：适度美化，不做大幅改动，重点提升视觉一致性
- **改进方向**：
  - 统一页面头部和导航的视觉风格
  - 优化按钮、卡片等 UI 组件的一致性
  - 改进页面间的过渡动画
  - 统一加载状态和错误状态的设计
  - 优化移动端的整体体验

#### 验收标准

1. 当我浏览网站的其他页面时，系统应该保持与 Gallery 和 Blog 页面一致的视觉风格
2. 当我查看页面头部和导航时，系统应该使用统一的设计语言和交互模式
3. 当我与按钮、表单等 UI 元素交互时，系统应该提供一致的视觉反馈
4. 当页面加载或出现错误时，系统应该使用统一的状态展示方式
5. 当我在移动设备上浏览时，系统应该在所有页面上提供一致的优化体验

### 需求 9

**用户故事：** 作为访客，我希望有快速的加载性能，以便我能够无延迟或挫折地浏览内容。

#### 验收标准

1. 当我访问 Gallery 或 Blog 页面时，系统应该在 2 秒内加载初始内容
2. 当显示图片或文章时，系统应该为屏幕外内容实现懒加载
3. 当我在页面之间导航时，系统应该预加载关键资源
4. 当内容正在加载时，系统应该显示渐进式加载状态
5. 如果图片很大，系统应该提供优化格式（WebP、响应式尺寸）
6. 当我返回之前访问过的页面时，系统应该利用缓存实现更快的加载
